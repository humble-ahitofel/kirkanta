{% extends "bootstrap_4_layout.html.twig" %}

{%- block choice_widget_collapsed -%}
  {% if not multiple %}
    {% set attr = attr|merge({class: (attr.class|default('') ~ ' custom-select')|trim}) %}
  {% endif %}
  {%- if required and placeholder is none and not placeholder_in_choices and not multiple and (attr.size is not defined or attr.size <= 1) -%}
      {% set required = false %}
  {%- endif -%}
  <select {{ block('widget_attributes') }}{% if multiple %} multiple="multiple"{% endif %}>
      {%- if placeholder is not none -%}
          <option value=""{% if required and value is empty %} selected="selected"{% endif %}>{{ placeholder != '' ? (translation_domain is same as(false) ? placeholder : placeholder|trans({}, translation_domain)) }}</option>
      {%- endif -%}
      {%- if preferred_choices|length > 0 -%}
          {% set options = preferred_choices %}
          {{- block('choice_widget_options') -}}
          {%- if choices|length > 0 and separator is not none -%}
              <option disabled="disabled">{{ separator }}</option>
          {%- endif -%}
      {%- endif -%}
      {%- set options = choices -%}
      {{- block('choice_widget_options') -}}
  </select>
{%- endblock %}

{%- block file_widget -%}
  {% set attr = attr|merge({class: (attr.class|default('') ~ ' custom-file-input')|trim}) %}

  <div class="custom-file">
    {{ block("form_widget_simple") }}
    <label class="custom-file-label" for="{{ form.vars.id }}">{% trans %}Choose file...{% endtrans %}</label>
  </div>
{% endblock %}

{%- block form_start -%}
  {% if attr.class is not defined %}
    {% set attr = attr|merge({"class": name}) %}
  {% endif %}
  {{ parent() }}
{%- endblock -%}

{% block form_errors -%}
  {% if errors|length > 0 -%}
  <div class="invalid-feedback">
    <ul class="list-unstyled">
      {%- for error in errors -%}
        <li><i class="fas fa-exclamation-circle"></i> {{ error.message }}</li>
      {%- endfor -%}
    </ul>
  </div>
  {%- endif %}
{%- endblock form_errors %}
{% block form_row %}
  {% if errors|length > 0 %}
    {% set widget_class = "is-invalid" %}
  {% else %}
    {% set widget_class = "" %}
  {% endif %}

  {% if 'actions' in block_prefixes %}
    {{ block('form_actions') }}
  {% elseif 'collection' in block_prefixes %}
    <fieldset class="form-group">
      {% if label != false %}
        <legend>{% if label %}{{ label }}{% else %}{{ name|humanize }}{% endif %}</legend>
      {% endif %}
      {{- form_widget(form) -}}
      {{- form_errors(form) -}}
    </fieldset>
  {% else %}
    <div class="form-group{% if (not compound or force_error|default(false)) and not valid %} has-error{% endif %}">
      {{- form_label(form) -}}
      {{- form_widget(form, {attr: {class: widget_class}}) -}}
      {% if form.vars.langcode is not defined %}
        {{- form_errors(form) -}}
      {% endif %}
    </div>
  {% endif %}
{% endblock %}

{% block tr_group_row %}
  <fieldset class="tr-group collapsed" data-app-group="content-language">
    {% for child in form %}
      <div class="tr-language-row" data-content-language="{{ child.vars.langcode }}" {% if not child.vars.language_active %}style="display: none"{% endif %}>
        {{ form_row(child) }}
      </div>
    {% endfor %}
  </fieldset>
{% endblock %}

{% block text_widget %}
  {% if langcode is defined %}
    <div class="input-group">
      <span class="input-group-prepend">
        <span class="input-group-text">{{ langcode }}</span>
      </span>
      {{ block("form_widget") }}
      {{ block("form_errors") }}
    </div>
  {% else %}
    {{ block("form_widget") }}
  {% endif %}
{% endblock %}

{% block url_widget %}
  {% if langcode is defined %}
    <div class="input-group">
      <span class="input-group-prepend">
        <span class="input-group-text">{{ langcode }}</span>
      </span>
      {{ block("form_widget") }}
    </div>
  {% else %}
    {{ block("form_widget") }}
  {% endif %}
{% endblock %}

{% block email_widget %}
  {% if langcode is defined %}
    <div class="input-group">
      <span class="input-group-prepend">
        <span class="input-group-text">{{ langcode }}</span>
      </span>
      {{ block("form_widget") }}
    </div>
  {% else %}
    {{ block("form_widget") }}
  {% endif %}
{% endblock %}

{% block textarea_widget %}
  {% if langcode is defined %}
    <div class="input-group">
      <span class="input-group-prepend">
        <span class="input-group-text">{{ langcode }}</span>
      </span>
      {{ parent() }}
    </div>
  {% else %}
    {{ parent() }}
  {% endif %}
{% endblock %}

{% block form_actions %}
  <div class="form-actions">
    {{ form_rest(form) }}
  </div>
{% endblock %}

{% block richtext_widget %}
  {% set attr = attr|merge({class: "richtext"}) %}
  {{ block("textarea_widget") }}
{% endblock %}
